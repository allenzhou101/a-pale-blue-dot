<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href = "main.css">
  <script src = "https://cdnjs.cloudflare.com/ajax/libs/three.js/101/three.min.js"></script>
  <script src = "https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <link href="https://fonts.googleapis.com/css?family=Space+Mono" rel="stylesheet">
</head>
<body onmousedown = "toSite()" onmouseup = "toNormal()">

  <!--<embed src="classical_music.mp3" autostart="true" loop="true"
width="2" height="0">
</embed>-->
  <span id = "circle"></span>
  <div class = "particle-background">
    <div class = "text-container">
      <div class = "outer1.5">
        <div class = "main-text2"></div>
      </div>
      <div class = "outer1">
        <div class = "main-text-circle"></div>
        <div class = "main-text"></div>
      </div>

      <div class = "outer-space">
        <div class = "second-continue" onclick = "fourthEvent()">c<div class = "o2">o</div>ntinue</div>
      </div>
      <div class = "outer2">
        <div class = "continue-text" onmouseover = "cursorChange(0)"
        onmouseout = "cursorChange(1)" onclick = "secondEvent()">click & hold to continue</div>
        <div class = "skip-text" ></div>
      </div>
    </div>
    <div class ="long-text-holder">
      <div class ="long-text">
         <div class = "the-one-long-text"></div>
         <div class = "carl" onmouseover = "sayAgain(0)" onmouseout="sayAgain(1)"> -Carl Sagan</div>
      </div>
      <br>
      <div class ="long-text-continue" onclick = "fourthEvent()">c<div class = "o4">
        o</div>ntinue</div>
    </div>
    <img src = "carl-sagan.jpg" alt="Carl Sagan's smiley face" height="500px" class = "Sagan">
  </div>
<script>
function toSite() {
  document.querySelector('.main-text').style.transform = "translateY(-50px)";
  document.querySelector('.continue-text').style = "transform: translateY(-20px);";
  document.querySelector('.skip-text').style.transform = "translateY(-20px)";
  document.querySelector('.main-text-circle').style = "transform: translateY(-50px) scale(0); opacity: 0;";
  document.querySelector('#circle').style = "  animation-name: fade3; animation-duration: 1s; animation-iteration-count: 1; animation-fill-mode: forwards;";

}
function toNormal() {
  document.querySelector('.main-text').style.transform = "translateY(0px)";
  document.querySelector('.continue-text').style = "transform: translateY(0px);";
  document.querySelector('.skip-text').style.transform = "translateY(0px)";
  document.querySelector('.main-text-circle').style = "transform: translateY(0px) scale(1); ";
  document.querySelector('#circle').style = "  animation-name: fade; animation-duration: 1s; animation-iteration-count: 1; animation-fill-mode: forwards;";

}
var item = document.body;

var timerID;
var counter = 0;

var pressHoldEvent = new CustomEvent("pressHold");

// Increase or decreae value to adjust how long
// one should keep pressing down before the pressHold
// event fires
var pressHoldDuration = 40;

// Listening for the mouse and touch events
item.addEventListener("mousedown", pressingDown, false);
item.addEventListener("mouseup", notPressingDown, false);
item.addEventListener("mouseleave", notPressingDown, false);

item.addEventListener("touchstart", pressingDown, false);
item.addEventListener("touchend", notPressingDown, false);

// Listening for our custom pressHold event
item.addEventListener("pressHold", doSomething, false);

function pressingDown(e) {
  // Start the timer
  requestAnimationFrame(timer);

  //e.preventDefault();
//  document.body.style = "";
  console.log("Pressing!");
}

function notPressingDown(e) {
  // Stop the timer
  cancelAnimationFrame(timerID);
  counter = 0;

  console.log("Not pressing!");
}

//
// Runs at 60fps when you are pressing down
//
function timer() {
  console.log("Timer tick!");

  if (counter < pressHoldDuration) {
    timerID = requestAnimationFrame(timer);
    counter++;
  } else {
    console.log("Press threshold reached!");
    item.dispatchEvent(pressHoldEvent);
    //document.location.href = "home2.html";
    secondEvent();

  }
}

function doSomething(e) {
  console.log("pressHold event fired!");
}


function cursorChange(i) {
  if (i == 0) {
    //document.querySelector('.skip-text').style = "animation: pulse 1s infinite;";
  }
  else {
   //document.querySelector('.skip-text').style = "animation:  pulse 1s infinite; ";

  }
}
function sayAgain(s){
  if (s > 0){
    document.querySelector('.Sagan').style = "visibility: hidden;";
    //document.body.style = "color: black;";
    //document.querySelector('.long-text-continue').style = "word-spacing: normal;";
  }
  else{
    document.querySelector('.Sagan').style = "visibility: visible;";
    //document.querySelector('.long-text-continue').style = "word-spacing: 1cm;";
    //document.body.style = "color: white;";
  }
}
</script>
<script>
function fourthEvent() {
  //document.body.style = "transform: scale(.001);";
  var delayInMilliseconds = 000;
  setTimeout(function() {
    //document.body.style = "transform: scale(.001); background-color: #4A4EA4";
    var delay2 = 00;
    setTimeout(function(){document.location.href = "home2.html";}, delay2);
    //document.body.style = "background-color: #E884A1;";
  }, delayInMilliseconds);
}
</script>
<script>
function thirdEvent() {
  document.body.style.transform = "scale(.001)";
  var delayInMilliseconds = 1000; //2 second
  setTimeout(function() {
  document.body.style = "transform: scale(1); background-color: #E884A1;";
  document.querySelector('.text-container').style.display = "none";
  //document.querySelector('.long-text-holder').style = "transform: perspective(500px) translateZ(500px);";


}, delayInMilliseconds);
setTimeout(function() {
  document.querySelector('.long-text-holder').style = "display: block; ";
}, delayInMilliseconds+250);
  setTimeout(function() {
    var sentence = "When you consider the nearly infinite number of forks in the road that lead to any single person being born, you must be grateful that you're you at this very second.";
        var letters = sentence.split("");
        var num = 0;
        var div = 1;
        for (var j = 0; j < sentence.split(" ").length; j++) {
          var wordDiv = document.createElement("div");
          wordClas = "w" + j;
          wordDiv.setAttribute('class', wordClas);
          wordDiv.style = "display: inline-block; ";
          document.querySelector('.the-one-long-text').appendChild(wordDiv);
          while (num < letters.length){
            var letter = letters[num];
            var clas = "l" + num;
            if (letter == " ") {
              letter = "&nbsp;";
            }
            var letterDiv = document.createElement("div");
            letterDiv.innerHTML = "" + letter;
            letterDiv.setAttribute('class', clas);
            document.querySelector("." + wordClas).appendChild(letterDiv);
            letterDiv.style = "display: inline-block; ";

            clas = "." + clas;

            num+= 1;
            var x = num / (250-num);


            document.querySelector(clas).style = "display: inline-block; opacity: 0; transform: scale(0); animation: .5s fadeLong forwards; animation-delay:" + x + "s;";
            if (letter == "&nbsp;"){
              break;
            }

          }
        }
  }, delayInMilliseconds+500);
  setTimeout(function() {
    document.querySelector('.carl').style = "opacity: 1; pointer-events: all;";
  }, 1661 + delayInMilliseconds + 500);
  setTimeout(function() {
    document.querySelector('.long-text-continue').style = "opacity: 1; pointer-events: all;";
  }, 2061 + delayInMilliseconds + 500);
}
</script>
<script>
function secondEvent() {
  //document.body.style = "transform: scale(1.3); transition: 2s; transform-origin: left;";
 document.body.style = "transform: scale(2.6); pointer-events: none !important;";
 document.querySelector('.main-text').style.transform = "translateY(-50px)";
 //document.querySelector('.skip-text').style.transform = "translateY(-20px)";
 document.querySelector('.main-text-circle').style = " opacity: 0;";
 document.querySelector('.main-text').innerHTML = "";
 document.querySelector('.outer2').style.display = "none";

 document.body.style = " background-color: white;";
var delay1 = 800;
setTimeout(function(){
  document.location.href = "home2.html";

document.body.style = "transform: scale(2.8); background-color: white; pointer-events: none;";
/*document.querySelector('.main-text').innerHTML = "You're alive right this second.";
document.querySelector('.main-text').style = "transform: translateY(0); color: black;";*/
document.querySelector('.main-text2').innerHTML = "You're alive right this second.";
document.querySelector('.main-text2').style = "transform: translateY(0); color: black;";
}, delay1);
setTimeout(function(){
document.body.style.transform = "scale(1.4)";
document.querySelector('.main-text').style.transform = "translateY(-60px)";
}, delay1 + 1000);
setTimeout(function(){
document.querySelector('.main-text').innerHTML = "That's an amazing thing.";
document.querySelector('.main-text').style = "color: black; transform: translateY(0px)";
}, delay1 + 1500);
setTimeout(function(){
//document.querySelector('.second-continue').style = " visibility: visible;";
}, delay1 + 2000);
setTimeout(function(){
fourthEvent();
//document.querySelector('.second-continue').style = "pointer-events: all; transform: translateY(0);";
}, delay1 + 3000);
}
/*
var delay4 = 10000;
setTimeout(function(){
  document.querySelector('.main-text').style.transform = "translateY(-50px)";
}, delay4);
var delay5 = 15000;
setTimeout(function(){
document.querySelector('.main-text').innerHTML = "That's an amazing thing!";
document.querySelector('.main-text').style.transform = "translateY(0px)";
}, delay5);
}*/

// The item (or items) to press and hold on


</script>
<script>
function openingEvent(){
  var delay1 = 000;

  setTimeout(function(){
 document.querySelector('.main-text').innerHTML = "A Pale Blue Dot";
 document.querySelector('.main-text').style.transform = "translateY(0px)";
 document.querySelector('.continue-text').style.transform = "translateY(0px)";
 document.querySelector('.skip-text').style.transform = "translateY(0px)";
 document.querySelector('.main-text-circle').style = "transform: translateY(0px) scale(1);  opacity: 1;";
}, delay1);
}
openingEvent();
</script>
<script>
//circle following cursor
jQuery(document).ready(function() {
  var mouseX = document.querySelector('.main-text-circle').getBoundingClientRect().x, mouseY = document.querySelector('.main-text-circle').getBoundingClientRect().y*6;
  var xp = 0, yp = 0;
  /*var delay = 750;
  setTimeout(function() {document.querySelector(".circle").style = "opacity: 1;";}, delay);*/
  $(document).mousemove(function(e){
    mouseX = e.pageX - 10;
    mouseY = e.pageY - 10;
  });
  setInterval(function(){
    xp += ((mouseX - xp)/6);
    yp += ((mouseY - yp)/6);
    $("#circle").css({left: xp +'px', top: yp +'px'});
  }, 20);
});
</script>
<script>
//Background Universe
var scene,
    camera,
    renderer,
    container,
    aspect,
    fov,
    plane,
    far,
    mouseX,
    mouseY,
    windowHalfX,
    windowHalfY,
    geometry,
    starStuff,
    materialOptions,
    stars;

init();
animate2();

function init() {
  container = document.createElement(`div`);
  document.body.appendChild(container);

  mouseX = 0;
  mouseY = 0;

  aspect = window.innerWidth / window.innerHeight;
  fov = 40;
  plane = 1;
  far = 800;

  windowHalfX = window.innerWidth / 2;
  windowHalfY = window.innerHeight / 2;

  camera = new THREE.PerspectiveCamera(
    fov,
    aspect,
    plane,
    far
  );

  camera.position.z = far / 2;

  scene = new THREE.Scene({ antialias: true });
  scene.fog = new THREE.FogExp2(0x1b1b1b, 0.0001);

  starForge();

  renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
  renderer.setPixelRatio((window.devicePixelRatio) ? window.devicePixelRatio : 1);
  renderer.setSize(window.innerWidth, window.innerHeight);
  renderer.autoClear = false;
  renderer.setClearColor(0x000000, 0.0);
  container.appendChild(renderer.domElement);

  document.addEventListener('mousemove', onMouseMove, false);
}

function animate2() {
  requestAnimationFrame(animate2);
  render();
}

function render() {
  camera.position.x += (mouseX - camera.position.x) * 0.005;
  camera.position.y += (-mouseY - camera.position.y) * 0.005;
  camera.lookAt(scene.position);
  renderer.render(scene, camera);
}

function starForge() {
  var amount = 20000;
  geometry = new THREE.SphereGeometry(1000, 100, 50);

  materialOptions = {
    color: new THREE.Color(0xffffff),
    size: 1.1,
    transparency: true,
    opacity: 0.8
  };

  starStuff = new THREE.PointsMaterial(materialOptions);


  for (var i = 0; i < amount; i++) {
    var item = new THREE.Vector3();
    item.x = Math.random() * 2000 - 1000;
    item.y = Math.random() * 2000 - 1000;
    item.z = Math.random() * 2000 - 1000;

    geometry.vertices.push(item);
  }

  stars = new THREE.PointCloud(geometry, starStuff);
  scene.add(stars);
}

function onMouseMove(e) {
  mouseX = e.clientX - windowHalfX;
  mouseY = e.clientY - windowHalfY;
}
</script>
</body>
</html>
