
<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css?family=Space+Mono" rel="stylesheet">
  <link href = "main2.css" rel = "stylesheet">
  <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <title>A Pale Blue Dot</title>
</head>
<body>
  <div class = "intro">
    <div class = "text-container">
      <div class = "top">
        <div class = "top-text">Y</div><div class = "o">ou</div><div class = "top-text">'</div><div class = "o">r</div><div class = "top-text">e</div>
        <div class = "top-text">aliv</div><div class = "o">e r</div><div class = "top-text">ight <div class = "o">t</div>his second.</div>
      </div>
      <div class = "bottom">
        <div class = "bottom-text">That's</div> <div class = "bottom-text">an</div> <div class = "o2">a</div><div class = "bottom-text">mazing</div> <div class = "o2">th</div><div class = "bottom-text">ing.</div>
      </div>
    </div>
  </div>

  <div id="topnav">
  </div>
  <div class="container">
    <div class="box-1">
      <div class="slide0">
        <div class="stickman">
          <div class="head"></div>
          <div class="body">
            <div class="arm" id="left"></div>
            <div class="arm" id="right"></div>
            <div class="leg" id="left"></div>
            <div class="leg" id="right"></div>
          </div>
        </div>
        <div class="circle"></div>

        <div class="slide-0-textbox">
          <div class = "large-text">Exploring the Earth & the Cosmos</div>
          <div class = "text">This site is currently under construction. Yeah. Right now.</div>
        </div>


      </div>
      <div class = "slide1">
        <div class = "pale-text">
          WHAT IS
        </div>
        <div class = "pale-text-rotated">
          A PALE BLUE DOT?
        </div>
        <div class = "para1">
          It has been said that astronomy
          is a humbling and character-building experience. There is
          perhaps no better demonstration of the folly of human conceits
          than this distant image of our tiny world. To me, it underscores
          our responsibility to deal more kindly with one another, and to
          preserve and cherish the pale blue dot, the only home we've ever known.
        </div>

        <div class = "para2">
          This image of Earth is one of 60 frames taken by the Voyager 1
          spacecraft on February 14, 1990 from a distance of more than 6
          billion kilometers (4 billion miles) and about 32 degrees above
          the ecliptic plane. In the image the Earth is a mere point of
          light, a crescent only 0.12 pixel in size. Our planet was caught
          in the center of one of the scattered light rays resulting from
          taking the image so close to the Sun. This image is part of
          Voyager 1's final photographic assignment which captured
          family portraits of the Sun and planets.
        </div>
        <div class = "sagan-speech">
          LISTEN TO
        </div>
        <div class="wrapper">
           <a href="#" title="Listen to the song" class="player-controls">
              <span class="audio-label">
                 <span>
                   Sagan's
                    <small> Speech</small>
                 </span>
              </span>
              <span class="play"></span>
              <span class="pause"></span>
           </a>
           <audio id="player">
              <source src="carl-sagan-speech.mp3" type="audio/mp3">
           </audio>
        </div>
      </div>

    </div>
    <div class="box-2">


    </div>

  </div>
  <script type="text/javascript">
    var delay = 5000;
    setTimeout(function() {
      //document.querySelector('.top-text').style = "transform: translate(-60px) !important;";
      //document.querySelector('.bottom-text').style = "transform: translate(-60px) !important;";

    }, delay)

       const scrollFactor = 0.3; //sets scroll speed


       //event listener to scroll on mouse wheel or laptop equivalent
     window.addEventListener("wheel", function(e) {

       var target = e.deltaY*scrollFactor;
       var container = document.querySelector(".container")
       var box1 = container.firstElementChild;
       var box2 = container.lastElementChild;

       var trans1 = box1.style.transform;
       var trans2 = box2.style.transform;
       var currX1 = parseFloat(trans1.substring(trans1.indexOf("(")+1, trans1.indexOf("px"))) || parseFloat(window.getComputedStyle(document.querySelector(".box-1")).transform.split(",")[4]);
       var currX2 = parseFloat(trans2.substring(trans2.indexOf("(")+1, trans2.indexOf("px"))) || parseFloat(window.getComputedStyle(document.querySelector(".box-2")).transform.split(",")[4]);

       box1.style.transform = "translateX("+(currX1+target)+"px)";
       box2.style.transform = "translateX("+(currX2+target)+"px)";

         if((currX1 + target)<-box1.clientWidth/2) {
           //in the second half of box 1
           //move box 2 to the right side of box 1

           if(box1.getBoundingClientRect().left > box2.getBoundingClientRect().left) {
             box2.style.transform = "translateX("+(box1.getBoundingClientRect().left+box1.clientWidth)+"px)";
             return;
           }
         } else {
           //in the first half of box 1
           if(box1.getBoundingClientRect().left < box2.getBoundingClientRect().left) {
             box2.style.transform = "translateX("+(-box1.clientWidth+box1.getBoundingClientRect().left)+"px)";
             return;
           }
         }
         if((currX2 + target)<-box2.clientWidth/2) {
           //in the second half of box 2
           if(box1.getBoundingClientRect().left < box2.getBoundingClientRect().left) {
             box1.style.transform = "translateX("+(box2.getBoundingClientRect().left+box2.clientWidth)+"px)";
             return;
           }
         } else {
           //in the first half of box 2
           if(box1.getBoundingClientRect().left > box2.getBoundingClientRect().left) {
             box1.style.transform = "translateX("+(box2.getBoundingClientRect().left-box1.clientWidth)+"px)";
             console.log(box1.style.transform);
             return;
           }
         }



     });

     var getaudio = $('#player')[0],
          mouseovertimer,
          audiostatus = 'off',
          playerControls = ".player-controls";

     $(document).on('mouseenter', playerControls, function() {

        if (!mouseovertimer) {

           mouseovertimer = window.setTimeout(function() {

              mouseovertimer = null;

              if (!$(playerControls).hasClass("playing")) {

                 getaudio.load();
                 getaudio.play();
                 $(playerControls).addClass('playing');
                 return false;

              }

           }, 2500);

        }

     });

     $(document).on('mouseleave', playerControls, function() {

        if (mouseovertimer) {

           window.clearTimeout(mouseovertimer);
           mouseovertimer = null;

        }

     });

     $(document).on('click touch', playerControls, function(e) {

        e.preventDefault();

        if (!$(playerControls).hasClass("playing")) {

           if (audiostatus == 'off') {

              $(playerControls).addClass('playing');
              getaudio.load();
              getaudio.play();
              window.clearTimeout(mouseovertimer);
              audiostatus = 'on';
              return false;

           } else if (audiostatus == 'on') {

              $(playerControls).addClass('playing');
              getaudio.play();

           }

        } else if ($(playerControls).hasClass("playing")) {

           getaudio.pause();
           $(playerControls).removeClass('playing');
           window.clearTimeout(mouseovertimer);
           audiostatus = 'on';

        }

        return false;

     });

     $('#player').on('ended', function() {

        $(playerControls).removeClass('playing');
        audiostatus = 'off';

     });


  </script>
</body>
</html>
